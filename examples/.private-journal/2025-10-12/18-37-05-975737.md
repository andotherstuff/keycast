---
title: "6:37:05 PM - October 12, 2025"
date: 2025-10-12T23:37:05.975Z
timestamp: 1760312225975
---

## Project Notes

## Keycast nostr-login Integration - Discovery Endpoint Fixed

**Problem Solved:** Discovery endpoint was returning 404 because routes were nested under /api in main.rs

**Solution:** Mounted `/.well-known/nostr.json` at root level before /api nesting in main.rs:133

**Architecture Details:**
- NIP-05 discovery requires endpoint at `/.well-known/nostr.json` (root level, not under /api)
- nostr-login fetches this to discover bunker providers
- Returns: `{"nip46": {"relay": "...", "nostrconnect_url": "..."}}`
- Axum Router nesting: Routes added to nested router inherit the prefix

**Current Status:**
- ✅ Discovery endpoint working: returns correct JSON
- ✅ API server running on port 3000
- ✅ Signer daemon loaded 40 OAuth authorizations
- ✅ Test page accessible on port 8000
- ⏸️ Need browser testing for full nostr-login flow

**Files Modified:**
- `api/src/main.rs:133` - Added discovery route at root level
- `api/src/api/http/routes.rs:148` - Already had nostr_discovery_public function
- `api/src/api/http/mod.rs:7` - Already had pub use routes::*

**Next:** Rabble wants customized nostr-login UX that defaults to Keycast registration/login with secondary "already have nostr?" option
