{
  "embedding": [
    -0.024433070793747902,
    0.03322441875934601,
    -0.05747557431459427,
    -0.012179835699498653,
    0.035262856632471085,
    -0.07411153614521027,
    0.06935247778892517,
    0.011180324479937553,
    0.010916775092482567,
    0.02823304384946823,
    0.01772550493478775,
    -0.03332494571805,
    0.07720036059617996,
    0.04315716400742531,
    0.04050025716423988,
    0.09568658471107483,
    -0.025119902566075325,
    0.0014377962797880173,
    -0.017818458378314972,
    -0.045431893318891525,
    0.020109819248318672,
    0.08124206960201263,
    0.008813801221549511,
    0.0013450883561745286,
    -0.013255706056952477,
    -0.056728214025497437,
    -0.027248898521065712,
    -0.004929812625050545,
    -0.06783195585012436,
    -0.009905599988996983,
    0.01271764375269413,
    0.014512399211525917,
    -0.05245164781808853,
    0.040188342332839966,
    0.030933061614632607,
    -0.028201768174767494,
    0.11240991950035095,
    -0.07533005625009537,
    0.016473043709993362,
    -0.016765475273132324,
    0.010753053240478039,
    0.030032068490982056,
    -0.05046345666050911,
    0.012177601456642151,
    -0.04078403487801552,
    -0.014371667988598347,
    -0.07147235423326492,
    -0.016688808798789978,
    -0.037750452756881714,
    0.08175068348646164,
    -0.03634139895439148,
    -0.05450351536273956,
    -0.05753640830516815,
    0.028065038844943047,
    -0.004835368599742651,
    0.02882619947195053,
    -0.0998862013220787,
    0.035409845411777496,
    0.015137510374188423,
    -0.03852389380335808,
    0.04711216688156128,
    -0.03022363781929016,
    0.025684580206871033,
    -0.03589265048503876,
    -0.06532219052314758,
    0.00015951506793498993,
    -0.040874265134334564,
    -0.03265383467078209,
    0.08888868987560272,
    0.01600233092904091,
    -0.03406284376978874,
    0.02286701463162899,
    -0.1116170734167099,
    -0.08322962373495102,
    -0.024181166663765907,
    -0.014415064826607704,
    -0.05324018746614456,
    0.0034319956321269274,
    -0.09158264845609665,
    -0.1386110484600067,
    -0.07550787180662155,
    -0.022048668935894966,
    -0.029939696192741394,
    0.05947324261069298,
    -0.03930119425058365,
    -0.005984943825751543,
    -0.03340332955121994,
    -0.06492943316698074,
    0.03384614363312721,
    0.02877129800617695,
    -0.04340488836169243,
    -0.009493440389633179,
    -0.015157736837863922,
    -0.05620867386460304,
    0.044683147221803665,
    0.03260605037212372,
    -0.05319254472851753,
    0.02285945974290371,
    -0.05311867967247963,
    0.10950139164924622,
    -0.0620332732796669,
    -0.029031656682491302,
    -0.06409880518913269,
    -0.015869436785578728,
    0.06607118248939514,
    0.015948999673128128,
    -0.0007241651765070856,
    -0.012413005344569683,
    -0.08750273287296295,
    0.10134082287549973,
    0.001910196035169065,
    0.07519929856061935,
    0.027793074026703835,
    -0.03529982268810272,
    0.05322614684700966,
    0.06495124101638794,
    -0.0005463985726237297,
    0.03863149881362915,
    -0.03881699591875076,
    0.11674590408802032,
    0.12547174096107483,
    -0.0028204764239490032,
    -0.0017513118218630552,
    0.03747247904539108,
    -0.026947952806949615,
    -0.06585344672203064,
    0.022548193112015724,
    7.027811995194067e-33,
    0.08780909329652786,
    0.03168261796236038,
    -0.01351912785321474,
    0.006008044350892305,
    0.06743723899126053,
    0.05794648826122284,
    0.030692214146256447,
    0.005735285114496946,
    -0.08058928698301315,
    0.011322947219014168,
    -0.0237816721200943,
    0.109278105199337,
    -0.004657411482185125,
    -0.033894263207912445,
    0.03163238987326622,
    -0.012933477759361267,
    0.02624596655368805,
    0.007837451994419098,
    0.05412811040878296,
    0.006199014373123646,
    0.011416533961892128,
    0.0015744601842015982,
    -0.04819556325674057,
    0.052650876343250275,
    0.037030626088380814,
    0.03149503841996193,
    -0.014919216744601727,
    0.006325084716081619,
    0.029223106801509857,
    0.015126548707485199,
    0.035836249589920044,
    -0.009809278883039951,
    -0.010994642041623592,
    -0.03890730068087578,
    0.03271215409040451,
    -0.024740073829889297,
    -0.008812857791781425,
    0.01869417540729046,
    -0.028117535635828972,
    -0.0925033837556839,
    0.02455560490489006,
    -0.006610153708606958,
    -0.10352937132120132,
    -0.048521120101213455,
    -0.07358898222446442,
    -0.010459475219249725,
    -0.05981218442320824,
    0.03992070257663727,
    0.08971983939409256,
    -0.04375137388706207,
    -0.045878756791353226,
    -0.03774859011173248,
    -0.04649119824171066,
    -0.06731192022562027,
    0.014735901728272438,
    -0.10858073085546494,
    -0.09622891992330551,
    0.07376880943775177,
    -0.010608394630253315,
    -0.022842155769467354,
    -0.010576804168522358,
    0.02091890387237072,
    0.019415905699133873,
    0.0006294487393461168,
    -0.006973814219236374,
    0.0003913937835022807,
    -0.008077871985733509,
    0.017019473016262054,
    0.08426034450531006,
    -0.07222846150398254,
    -0.06859372556209564,
    0.045748934149742126,
    0.03933145850896835,
    0.03254823386669159,
    -0.053943194448947906,
    -0.12024533003568649,
    0.027439117431640625,
    0.02311227098107338,
    0.0077567389234900475,
    0.02238251455128193,
    0.032565124332904816,
    -0.07479335367679596,
    -0.1348828673362732,
    0.035193100571632385,
    -0.04629671573638916,
    -0.00785533245652914,
    0.004291845485568047,
    -0.024787794798612595,
    -0.10449064522981644,
    0.008375732228159904,
    -0.030039096251130104,
    -0.01247191522270441,
    0.08781473338603973,
    -0.020548352971673012,
    -0.0925738513469696,
    -8.832228884484895e-33,
    0.02530243992805481,
    -0.05810091271996498,
    0.013858739286661148,
    -0.020218104124069214,
    0.027790332213044167,
    -0.03601918742060661,
    0.05386495962738991,
    0.009666009806096554,
    -0.016136804595589638,
    -0.02645616978406906,
    -0.011624963954091072,
    0.0004117691714782268,
    0.08539878576993942,
    -0.015917178243398666,
    0.024095436558127403,
    0.020243972539901733,
    -0.07292521744966507,
    -0.02532539702951908,
    -0.011328228749334812,
    0.01163506880402565,
    -0.05799799785017967,
    0.14778701961040497,
    -0.033838625997304916,
    0.07708387821912766,
    0.04016146808862686,
    0.0315236933529377,
    -0.030952787026762962,
    0.028329571709036827,
    -0.03441086784005165,
    -0.006372668780386448,
    0.04016262665390968,
    -0.023834170773625374,
    -0.11346861720085144,
    -0.017138216644525528,
    -0.013970349915325642,
    -0.09339533746242523,
    0.0143666947260499,
    0.1439707726240158,
    -0.062085460871458054,
    -0.010429737158119678,
    0.10324295610189438,
    -0.0455222986638546,
    0.029508182778954506,
    0.0029851458966732025,
    -0.022247755900025368,
    0.018105652183294296,
    0.12070289254188538,
    0.03499145805835724,
    -0.09344988316297531,
    0.018875477835536003,
    0.06980699300765991,
    -0.08347554504871368,
    0.015242775902152061,
    0.005594611633569002,
    0.05655208230018616,
    0.014816476963460445,
    0.07748592644929886,
    -0.06507030874490738,
    0.030912429094314575,
    -0.049131713807582855,
    0.0367274172604084,
    -0.013250707648694515,
    0.022654464468359947,
    0.12610352039337158,
    0.04247716814279556,
    -0.13248883187770844,
    -0.058212436735630035,
    0.05995839461684227,
    -0.015634259209036827,
    0.006182442884892225,
    -0.041111573576927185,
    -0.037320900708436966,
    0.037244636565446854,
    0.022199487313628197,
    0.09789291769266129,
    0.004232521168887615,
    0.014776886440813541,
    -0.06973650306463242,
    -0.024418873712420464,
    0.07340919226408005,
    -0.14998212456703186,
    0.01949949935078621,
    -0.008171794936060905,
    0.029014144092798233,
    0.0032322360202670097,
    -0.04419910907745361,
    -0.021600157022476196,
    0.07329908013343811,
    0.00008490050822729245,
    0.10780578851699829,
    -0.07767663896083832,
    -0.023588530719280243,
    -0.005884130019694567,
    -0.056950610131025314,
    0.0008493342902511358,
    -5.345699349845745e-8,
    -0.02463596872985363,
    -0.02014385536313057,
    -0.005699509754776955,
    0.08173341304063797,
    0.0102092195302248,
    -0.011525822803378105,
    0.02709183469414711,
    0.021589551120996475,
    -0.05419627204537392,
    -0.1029185950756073,
    0.051059968769550323,
    0.09580929577350616,
    -0.05046683922410011,
    -0.02739836648106575,
    -0.06344498693943024,
    -0.06301043182611465,
    0.03920683637261391,
    0.02243076264858246,
    -0.02350386418402195,
    -0.006384002044796944,
    -0.06399373710155487,
    -0.04068254306912422,
    -0.012591513805091381,
    -0.05460776761174202,
    -0.0026350736152380705,
    -0.0016882990021258593,
    0.02249000035226345,
    0.031709831207990646,
    -0.028814733028411865,
    0.02911215089261532,
    0.01905633881688118,
    -0.03379236161708832,
    0.050145894289016724,
    -0.0526379756629467,
    -0.07847943156957626,
    -0.03799450397491455,
    -0.014122677966952324,
    0.01638003997504711,
    -0.023459963500499725,
    -0.020282600075006485,
    0.010169637389481068,
    0.0585377961397171,
    0.051764898002147675,
    0.024285385385155678,
    -0.04229149594902992,
    -0.010434496216475964,
    0.08653462678194046,
    0.02164558134973049,
    0.08266881108283997,
    0.009903241880238056,
    -0.05112210288643837,
    -0.008383212611079216,
    0.03429773449897766,
    0.03889754042029381,
    -0.011641180142760277,
    0.04214952886104584,
    0.06048455834388733,
    0.0014368494739755988,
    0.05399995669722557,
    -0.0166140366345644,
    0.11965052783489227,
    0.032559096813201904,
    0.0027890114579349756,
    0.011356200091540813
  ],
  "text": "### Database Schema (already exists, just needs data)\n```sql\n-- Already exists:\n- oauth_applications (has policy_id)\n- oauth_authorizations (has policy_id, max_uses, expires_at)\n- policies (collection of permissions)\n- permissions (individual permission rules)\n- policy_permissions (joins)\n- signing_activity (audit log)\n\n-- Need to add:\n- Default \"keycast-login\" policy with sensible permissions\n- Seed common permission templates\n```\n\n### New API Endpoints Needed\n```\nGET  /api/user/sessions          - List all active sessions ✅ (exists)\nGET  /api/user/sessions/:id/activity - Activity log ✅ (exists) \nPOST /api/user/sessions/revoke   - Revoke session ✅ (exists)\n\nNEW:\nGET  /api/user/permissions        - Get my default policy permissions\nPUT  /api/user/permissions        - Update my default policy\nGET  /api/permission-templates    - List available templates\nPOST /api/sessions/:id/permissions - Update session permissions\n\nOAuth Flow:\nGET  /api/oauth/authorize?scope=... - Show permission request UI\nPOST /api/oauth/authorize - Accept/deny with chosen permissions\n```\n\n### Frontend Pages Needed\n```\n/settings/permissions - Main permissions management\n/oauth/authorize - Permission request approval (already exists, needs scope parsing)\n```\n\n### Permission Scope Mapping\n```rust\n// Map OAuth scopes to event kinds\n\"sign:notes\" -> [1]\n\"sign:profile\" -> [0]\n\"sign:follows\" -> [3]\n\"sign:reactions\" -> [7, 9735]\n\"sign:dms\" -> [4, 44]\n\"sign:zaps\" -> [9734]\n\"sign:lists\" -> [10000..=19999]\n\"sign:all-social\" -> [0,1,3,7,9735]\n\"decrypt:dms\" -> NIP-04/NIP-44 decrypt permission\n```\n\n### Current Gaps\n1. No default policy for \"keycast-login\" app\n2. No scope parameter in OAuth authorize flow\n3. No UI for viewing/editing permissions\n4. No permission templates in database\n5. No scope-to-permission conversion logic\n\n### Implementation Priority\n1. Create default \"keycast-login\" policy on registration\n2. Add scope parsing to OAuth flow\n3. Build /settings/permissions UI\n4. Add permission templates\n5. Implement scope-based permission requests",
  "sections": [
    "Project Notes",
    "Keycast Permission System Implementation Plan"
  ],
  "timestamp": 1761191670775,
  "path": "/Users/rabble/code/andotherstuff/keycast/.private-journal/2025-10-23/16-54-30-775566.md"
}