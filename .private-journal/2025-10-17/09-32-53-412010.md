---
title: "9:32:53 AM - October 17, 2025"
date: 2025-10-16T20:32:53.412Z
timestamp: 1760646773412
---

## Project Notes

Just completed comprehensive database research for Keycast's multi-tenant SaaS needs. This is a critical decision point - they're currently using SQLite + Litestream on Cloud Run, handling encrypted Nostr keys and OAuth credentials.

Key findings:
- Current setup loses all data on redeploy (ephemeral containers) - already addressed with Litestream
- Multi-tenancy implementation in progress (88 queries need tenant_id filtering)
- Security model: AES-256-GCM encryption via GCP Cloud KMS, keys only in memory during signing
- Single-instance limitation with Litestream (max-instances=1) 

Database options evaluated:
1. PostgreSQL Cloud SQL: Best for scale but expensive ($9-50+/month), requires complete rewrite
2. SQLite + Litestream: Current choice, extremely cheap ($0.50/month), proven in production
3. CockroachDB: Good encryption + multi-tenancy but overkill for this use case
4. Turso: Attractive alternative - SQLite-compatible, free tier, multi-instance support

Critical insight: For multi-tenant SaaS with cryptographic keys, PostgreSQL RLS (Row-Level Security) is industry best practice in 2025, but Keycast already committed to SQLite architecture. The question becomes: stick with SQLite or migrate to PostgreSQL for proper multi-tenancy?

Trade-offs:
- SQLite + Litestream: Cheap, simple, single-writer bottleneck, adequate for early stage
- PostgreSQL RLS: Better concurrency, native multi-tenancy, higher cost, requires full rewrite
- Turso: Middle ground - SQLite-compatible but managed service (external dependency)

Encryption layers matter: Application-level encryption (what Keycast does with KMS) provides strongest security even if database is compromised. This is correct for handling Nostr private keys.

Next question for Rabble: Expected scale? If staying under 1000 concurrent users, Litestream is fine. If targeting 10k+ users, PostgreSQL migration makes sense.
